---
title: "JavaScriptのクラス（class）を理解する"
emoji: "📑"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [javascript]
published: false
---

普段はReact を触っていますが、JavaScriptのクラス（class）は使用することがなかったため学ぶことを後回しにしていました。
今回は業務で使用する機会があったので、理解しながらまとめていこうかと思います。

# クラスとは

まずはクラスとはどのようなものなのか？について調べてみました。

- クラスとはオブジェクトを作成する雛形のようなもの。
- オブジェクトには設定したいプロパティ、メソッドを定義することができる。
- オブジェクトの作成時に実行されるコンストラクタという処理を実装することで、プロパティの値などをオブジェクトごとに変更できる。

オブジェクトリテラルでオブジェクトを作成した場合は、作成したい数だけ定義する必要がありますが、クラスを作成することで一つの雛形を作成するだけで複数のオブジェクトを作成することができるようになります。

## クラスを使用するメリット

クラスを使用するメリットには以下のようなものがあります。

- コードの重複が減り、メンテナンス性が向上する。
- オブジェクトの数が増えても簡単にオブジェクトを作成できる。

## クラスの書き方

クラスの基本的な構文は以下です。

```js
class クラス名 { // クラス名は大文字から始める

  // オブジェクト作成時に実行される処理
  constructor(引数) {
    // thisに設定したプロパティがオブジェクトに設定される
    this.プロパティ名 = 引数;
  }

  メソッド名() {
    // 処理
  }
}

// クラスからオブジェクトを作成
const オブジェクト名 = new クラス名(引数); // 引数は省略可能
```

- クラスからオブジェクトを作成することを`インスタンス化`と呼びます。
- インスタンス化によって作成されるオブジェクトは`インスタンス`と呼びます。
- インスタンス化によってインスタンスを作成するには`new演算子`を使用します。

ここまででクラスの基本的な書き方が分かりましたので、実際に書いてみます。

```js
class Person {
  constructor(name,age) {
    this.name = name;
    this.age = age;
  }

  introduce() {
    // メソッド内のthisはインスタンスを指す
    console.log(`私の名前は${this.name}です。年齢は${this.age}です。`);
  }

  foo() {
    // オブジェクトのメソッド内から他のメソッドを呼び出すことも可能
    this.introduce();
  }
}

const instance = new Person('山田太郎',20);
console.log(instance); // Person { name: '山田太郎', age: 20 }
console.log(instance.name); // 山田太郎
console.log(instance.age); // 20
console.log(instance.introduce()); // 私の名前は山田太郎です。年齢は20です。
console.log(instance.foo()); // 私の名前は山田太郎です。年齢は20です。
```

処理の流れを確認してみます。

①クラスのコンストラクタが実行される。
（インスタンス化のときに渡された引数がコンストラクタの引数として渡される）

②コンストラクタの実行が終わり、thisがnew演算子の結果として返される。

③返されたインスタンスは、{name: '山田太郎', age: 20}というオブジェクトとして定義される。

## クラスの継承

クラスは継承することもできます。
継承することで親クラスのプロパティやメソッドを子クラスで使用することが可能になります。

```js
class Parent {
  constructor(name) {
    this.name = name;
  }

  introduce() {
    console.log(`私の名前は${this.name}です。`);
  }
}

class Child extends Parent { // extendsを使用して継承する
  constructor(name,age) {
    super(name); // 親クラスのコンストラクタを実行
    this.age = age;
  }

  introduce() {
    super.introduce(); // 親クラスのメソッドを呼び出す
    console.log(`年齢は${this.age}です。`);
    console.log(`私の名前は${this.name}です。年齢は${this.age}です。`);
  }
}

const instance = new Child('山田太郎',20);
console.log(instance); // Child { name: '山田太郎', age: 20 }
console.log(instance.introduce()); // 私の名前は山田太郎です。年齢は20です。
```

- extendsを使用して継承する。
- thisを使用して親クラスのプロパティやメソッドにアクセスが可能。
- 子クラスでコンストラクタを定義する場合は、super()を使用して親クラスのコンストラクタを実行する必要がある。
- 子クラスで親クラスのメソッドを呼び出す場合は、super.メソッド名()を使用する。

## ES2022のクラス記法


### コンストラクタの省略

- ES6でプロパティを設定する場合は、コンストラクタ内でthisに設定する必要がありましたが、ES2022からはクラスのトップレベルでプロパティを設定することが可能になっているようです。

```js
class Person {
  name = '山田太郎'; // クラスのトップレベルでプロパティを設定
}
```
